## 性能指标
计算机网络的性能，一般是指几个重要的性能指标

### 速率
数据的传送速率
### 带宽
带宽有2种不同含义
- 1.模拟信号，又称 连续信号，它在一定的时间范围内可以有无限多个不同的取值，如温度、湿度、压力、长度、电流、电压。带宽在这种信号下，是指该信号具有的**频带宽度**。比如在 传统的通信线路上的电话信号是 3.1khz（从300Hz 到 3.4kHz，是话音的主要成分的频率范围）。
- 2.数字信号，取值上是离散的、不连续的信号。在计算机网络中采用数字信号，这时带宽用来表示，网络中某通道传送数据的能力，因而网络带宽表示在单位时间内网络中某信道所能通过的“最高数据率”。


### 吞吐量
表示在单位时间内 通过某个网络的实际数据量。 很显然， 受到 速率 与 带宽的影响
### 时延
是指数据从一端到另外一端的所需的时间，时延是一个重要的指标，由以下几个不同的部分组成
- 发送时延， 是指 发送数据帧的第一个bit算起，到最后一个bit发送完毕所需的时间。 发送时延= 数据帧长度/发送速率。 发生在机器内部，一般在网络适配器
- 传播时延  传播时延是电磁波在信道中传播一定距离需要花费的时间。传播时延=信道长度/电磁波在信道上的传播速率（m/s）. 电磁波在真空中传输是光速，从中国发送电磁波0.9s 能达到美国。在光纤中传播速度是 2.5* 10 5次方。 发生在机器外部，与距离有关。
- 处理时延
- 排队时延
- 总时延 = 发送+传输+处理+排队

### 时延带宽积
传播时延* 带宽 就得到一个很有用的度量，**传播时延带宽积**。
![](../imgs/6.png)

假如：设某段链路的传播时延为20ms，带宽为10mbit/2算出：
传播时延带宽积 = 20* 10(-3) *10 * 10(6) = 2* 10(5) bit;
这就表明，若发送端连续发送数据，则在发送第一个bit即将到达终点时，发送端已经发送了20万个bit，而这20万个bit 正在链路上向前移动。

### 往返时间RTT（Round-Trip Time）
这是因为在许多情况下，互联网的信息不仅仅单方向传送而是双向交互的。因此，我们很需要知道双向交互一次所需的时间。

### 利用率

- 信道利用率
  - 指出某信道有百分之几的时间是被利用（有数据通过）。完全空闲的信道利用率是零。
- 网络利用率
  - 全网络的信道利用率的平均值。

信道利用率并非越高越好，这是因为，根据排队的理论，当某信道的利用率增大，该信道的时延也就迅速增加。这和高速公路的情况有些相似。当高速公路上的车流量很大时，由于在公路上的某些地方出现了堵塞，那就没车道让你切换了。网络也有类似的情况，当网络的通信量很小时，网络产生的时延并不大，但在网络通信量不断加大的情况下，由于分组在网络节点（路由器或者结点交换机）进行处理时，需要排队等候，因此网络引起的时延就会增大。
因此我们必须有这样的概念： **信道或网络的利用率过高会产生非常大的时延**，一般来说，利用率不能超过50%，超过了就要准备扩容，增大线路的带宽。
![](../imgs/7.png)


### 概念说明
#### 模拟信号和数字信号的区别
+ 模拟信号
    - 时间上连续，取值上联系连续
    - 信号的原始形态：比如温度通过传感器根据温度变化转换为电压信号或者电阻信号或者金属膨胀程度，这些值都是随着温度变化值大小连续变化的。语音信号，有很多不同频率的信号混叠而成，但其值都是时间联系的。

+ 数字信号
    - 时间离散，取值离散
    - 信号形态：0 | 1 已及 0和1组成的序列

+ 模拟信号如何转为数字信号
    - 采样：
        + 对模拟信号，安装特定的频率采集对应的值。比如一个温度传感器信号周期是1s，我们每隔0.25s就取一下当前的电阻值，比如 0.25s: 0.2mv; 0.50s 0.22mv 0.75s 0.1mv;  
        + 采样定律，采样频率大于原始信号频率2倍时采样信号通过差值运算可以恢复原始信号。
    - 保持
        + 在本次采样转换为数字信号之前保持当前的采样电阻值或者电压值，由专门的电路设计单元来完成。
    - 量化
        + 比如刚才的采样：0.25s: 0.2mv; 0.50s 0.22mv 0.75s 0.1mv。然后我们数字信号最后编码一组数据由两个比特组成，那么我们可以精确的表达 2x2 = 4 个不同的值。那么，我们把一个传感器能够测量的范围给出四个等间隔的值。比如：0.05mv：00，0.15mv：01,0.25mv：10,0.35mv：11。那么，0.22mv 和 0.25mv 也就是 10 最接近。那么从 0.22mv 到 0.25mv 最后输出 10 就是量化。
    - 编码
        + 输出的每个采样最后都变成 10 两个一组的数字信号就叫编码。比如 0.25s: 0.2mv; 0.50s 0.22mv 0.75s 0.1mv 最后量化编码后变为：10 10 11

+ 数字信号转为模拟信号
    - 按照传输的数字信号按编码分组还原原始值，对数字信号进行一些差值运算还原模拟信号。简单理解：把数字信号按采样间隔和对应的值放到时间上，顺着取值连成一个连续的波形。数学上由傅里叶变换等算法完成。

##### Refs
+ 模拟信号到数字信号转换: https://wenku.baidu.com/view/cf4ef8a02cc58bd63186bd88.html
+ https://baike.baidu.com/item/%E6%A8%A1%E6%8B%9F%E6%95%B0%E5%AD%97%E8%BD%AC%E6%8D%A2%E5%99%A8/5382125
+ 温度传感器原理：https://baike.baidu.com/item/%E6%B8%A9%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8
+ 压力传感器原理：https://baike.baidu.com/item/%E5%8E%8B%E5%8A%9B%E4%BC%A0%E6%84%9F%E5%99%A8/993161?fr=aladdin
+ 压力传感器原理2：http://www.360doc.com/content/18/0901/22/21923670_783136508.shtml


### 带宽
+ 信道带宽与信道容量
    - 信道带宽：指物理传输介质能够通过的信号最高频率与最低频率的差值
    - 信道容量：通常指数字信号。信道支持的最大传输速率或者叫一秒传输的比特数

+ 转换：香农定理

一个物理介质的知道信道带宽后可以根据香农定理算出信道容量，也可以通过信道容量反推出信道带宽。香农定律如下：

![](../imgs/香农定律.png)

这个公式叫做香农定理，其中W为信道带宽，S为信号的平均功率，N为噪声的平均功率，s/n叫做信噪比。由于在实际使用中S与N的比值太大，故常取其分贝数(db)。分贝与信噪比的关系为 : db=10lgs/n

可以看到信号带宽越大我们说的网速也就是速率越快是对的，但是他们不是线性相关的，而且这里跟信噪比这个环境因素也是有直接关系的。

> 举例：通常音频电话连接支持的频率范围为300Hz到3300Hz，则B=3300Hz－300Hz=3000Hz，而一般链路典型的信噪比是30dB，即S/N=1000，因此我们有C=3000×log2(1+ 1000)，近似等于30Kbps，是28.8Kbps调制解调器的极限，因此如果电话网络的信噪比没有改善或不使用压缩方法，调制解调器将达不到更高的速率。



#### Refs：
+ 模拟信道和数字信道：https://baike.baidu.com/item/%E4%BF%A1%E9%81%93%E5%B8%A6%E5%AE%BD/8780875
+ 香农定律：https://baike.baidu.com/item/%E9%A6%99%E5%86%9C%E5%AE%9A%E7%90%86/7138715